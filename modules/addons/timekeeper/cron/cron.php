<?phpuse WHMCS\Database\Capsule;// WHMCS bootstrap if needed (uncomment if running standalone outside WHMCS)require(dirname(__DIR__, 4) . '/init.php');date_default_timezone_set('Africa/Johannesburg'); // Set to your local timezone if needed$today = date('l'); // e.g. "Monday"$todayKey = 'cron_' . $today;// 1. Check if today is marked as inactive$dayStatus = Capsule::table('mod_timekeeper_permissions')    ->where('setting_key', $todayKey)    ->where('role_id', 0)    ->value('setting_value');//debugecho "ðŸ•“ Today is $today ($todayKey), status: " . ($dayStatus ?? 'null') . "\n";if ($dayStatus === 'inactive') {    echo "â›” Skipping: $today is marked as inactive.\n";    exit;}// 2. Fetch assigned users$assignedUsers = Capsule::table('mod_timekeeper_assigned_users')->pluck('admin_id')->toArray();if (empty($assignedUsers)) {    echo "âš ï¸ No assigned users to create timesheets for.\n";    exit;}// 3. For each user, check if a timesheet already exists today$todayDate = date('Y-m-d');$createdCount = 0;foreach ($assignedUsers as $adminId) {    $exists = Capsule::table('mod_timekeeper_timesheets')        ->where('admin_id', $adminId)        ->where('timesheet_date', $todayDate)        ->exists();//debugecho "ðŸ” Checking admin $adminId: timesheet exists? " . ($exists ? 'yes' : 'no') . "\n";    if (!$exists) {        Capsule::table('mod_timekeeper_timesheets')->insert([            'admin_id' => $adminId,            'timesheet_date' => $todayDate,            'status' => 'pending',            'created_at' => date('Y-m-d H:i:s'),        ]);        $createdCount++;    }}echo "âœ… Created $createdCount timesheet(s) for $today.\n";