<?php$daysOfWeek = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];?><form method="post" action="" onsubmit="selectAllAssignedUsers()"><div class="timekeeper-settings-cron mt-4">    <h4>Create a Daily Timesheet via Cron Function</h4>    <p class="text-muted">        Use the settings below to configure automatic daily timesheet creation for selected admin users.    </p>    <div class="mb-3">        <label><strong>Cron URL:</strong></label>        <p class="text-muted">Set up a daily cron job on your hosting server using the following path:</p>        <code>php -q /path-to-your-whmcs/modules/addons/timekeeper/cron/cron.php</code><br>        <small class="text-muted">(Replace <code>/path-to-your-whmcs/</code> with your actual WHMCS path.)</small>    </div><br>    <div class="mb-4">        <label><strong>Cron Days</strong></label>        <p class="text-muted">Please select the workdays you want timesheets to be automatically created for:</p>        <div class="form-group">            <?php foreach ($daysOfWeek as $day): ?>                <label class="mr-3">                    <input type="checkbox" name="cron_days[]" value="<?= $day ?>" <?= ($currentCronDays['cron_' . $day] ?? '') === 'active' ? 'checked' : '' ?>>                    <?= $day ?>                </label>            <?php endforeach; ?>        </div>    </div>        <div class="mb-4">        <label><strong>Assigned Users</strong></label>        <p class="text-muted">            Use the boxes below to assign or unassign admin users for daily timesheet creation.<br>            ➤ <strong>Only users in the “Assigned Users” box will be saved.</strong><br>            ➤ <strong>To select multiple users, hold down <kbd>Ctrl</kbd> (or <kbd>Cmd</kbd> on Mac) while clicking.</strong>        </p>        <div class="dual-select-controls-wrapper">             <!-- Active Users -->            <div class="user-select-block">				<label for="availableUsers" class="user-select-label">Active Users</label>              <select multiple class="form-control user-select-box" id="availableUsers" style="width: 200px; height: 180px;">				<?php foreach ($allAdmins as $admin): ?>                        <?php if (!in_array($admin->id, $cronUsers)): ?>                            <option value="<?= $admin->id ?>"><?= $admin->firstname ?> <?= $admin->lastname ?></option>                        <?php endif; ?>                    <?php endforeach; ?>			  </select>			</div>					<!-- Button Controls -->            <div class="dual-select-controls">                <button type="button" id="addUser" class="btn btn-default" onclick="moveSelected('availableUsers', 'assignedUsers')">➡️</button>                <button type="button" id="removeUser" class="btn btn-default" onclick="moveSelected('assignedUsers', 'availableUsers')">⬅️</button>            </div>            <!-- Assigned Users -->			<div class="user-select-block">				<label for="assignedUsers">Assigned Users</label>              <select multiple class="form-control" name="cron_users[]" id="assignedUsers" style="width: 200px; height: 180px;">						<?php foreach ($allAdmins as $admin): ?>                        <?php if (in_array($admin->id, $cronUsers)): ?>                            <option value="<?= $admin->id ?>"><?= $admin->firstname ?> <?= $admin->lastname ?></option>                        <?php endif; ?>                    <?php endforeach; ?>			  </select>            </div>        </div>    </div>    <script>    function moveSelected(fromId, toId) {        const fromSelect = document.getElementById(fromId);        const toSelect = document.getElementById(toId);        const selectedOptions = Array.from(fromSelect.selectedOptions);        selectedOptions.forEach(option => {            fromSelect.removeChild(option);            toSelect.appendChild(option);        });    }    function selectAllAssignedUsers() {        const assigned = document.getElementById('assignedUsers');        for (let i = 0; i < assigned.options.length; i++) {            assigned.options[i].selected = true;        }    }    </script></div>    <button type="submit" id="saveSettingsButton" class="btn btn-primary">Save Settings</button></form>